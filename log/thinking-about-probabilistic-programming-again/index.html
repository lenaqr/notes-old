<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
      <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Thinking about probabilistic programming&nbsp;again | Anthony Lu</title>
    <link href="https://fonts.googleapis.com/css?family=Inconsolata|Merriweather" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="//luanths.github.io/theme/base.css" />
    <link href="//luanths.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Anthony Lu Full Atom Feed" />





  </head>
  <body>
    <header id="header">
      <nav id="navigation">
        <a href="/about/">About</a>
        <a href="/log/">Log</a>
      </nav>
    </header>

    <section id="content">
  <header>
    <h1 class="entry-title">
      <a href="//luanths.github.io/log/thinking-about-probabilistic-programming-again/" rel="bookmark"
         title="Permalink to Thinking about probabilistic programmingÂ again">Thinking about probabilistic programming&nbsp;again</a></h2>
 
  </header>
  <div class="entry-content">
    <p>Between having just come back from NeurIPS and met some of my old labmates, and
watching the <a href="https://www.youtube.com/playlist?list=PL_PW0E_Tf2qvXBEpl10Y39RULTN-ExzZQ">talks from <span class="caps">PROBPROG</span> 2018</a>, I&#8217;ve gotten into a
probabilistic programming&nbsp;mood.</p>
<p>In particular I&#8217;ve been thinking about the design of probabilistic programming
frameworks, from the now trendy deep-learning-focused ones such as <a href="http://pyro.ai/">Pyro</a>
and <a href="https://github.com/tensorflow/probability/tree/master/tensorflow_probability/python/edward2">Edward2</a>, to a new project from my former lab, <a href="https://github.com/probcomp/Gen">Gen</a>.</p>
<p>Of course, my <a href="https://dspace.mit.edu/handle/1721.1/113160">M.Eng thesis</a> was on this topic. But looking back on it
now, the proposal in my thesis seems <em>way too complicated</em>. (I think it&#8217;s
partly to blame that I was anchored to the existing implementations of Venture
in the lab, which had a lot of complicated cruft in&nbsp;them.)</p>
<p>I want to revisit this and maybe eventually produce something that I can explain
to other people, but for now here are some scattered thoughts
(incomprehensibility&nbsp;warning):</p>
<ul>
<li>
<p>In my thesis there was this whole section on traces with a monolithic
  interface that they should satisfy. I like Gen&#8217;s approach better, where a
  trace is basically a plain data structure whose interpretation depends on the
  model&nbsp;program.</p>
</li>
<li>
<p>In fact, I would go further. Probabilistically, there&#8217;s nothing special about
  tracing; it&#8217;s just a program transformation that turns a probabilistic program
  into a trace-valued random variable. This should simplify concepts a&nbsp;lot.</p>
</li>
<li>
<p>I had this idea that stochastic procedures could have their own internal
  mutable state, to keep track of something like sufficient statistics. In
  hindsight it seems better for procedures to be stateless but allowed to mutate
  their inputs. You can still have a stateful procedure by making a closure.
  Note: mutation only works if a procedure knows how to run itself backward to
  undo what it&nbsp;did.</p>
</li>
<li>
<p>Another source of complexity was for handling probabilistic programs that
  don&#8217;t have a joint density, such as programs that call out to an external
  simulator. My current opinion is that this doesn&#8217;t seem worth cluttering up
  the core interface for. You could work around this by, for example, tracing
  the external program&#8217;s use of the random number generator and making a joint
  density out of that. (This is basically the approach in <a href="https://arxiv.org/pdf/1807.07706.pdf">Frank Wood&#8217;s work
  with the physics simulator <span class="caps">SHERPA</span></a>.)</p>
</li>
<li>
<p>If the trace is just a data structure like in Gen, all the incremental graph
  stuff in Venture just becomes a data diffing problem. That&#8217;s&nbsp;neat.</p>
</li>
</ul>
  </div><!-- /.entry-content -->
  <footer class="post-info">
    <time class="published" datetime="2018-12-15T00:00:00-05:00">
      December 2018
    </time>
  </footer><!-- /.post-info -->
    </section>

    <fooder id="footer">
      Site generated by
      <a href="http://getpelican.com/">Pelican</a>
      and hosted by
      <a href="http://pages.github.com/">GitHub Pages</a>
    </footer>
  </body>
</html>